# === DEFAULT APPS === #
    $launcher = rofi -show drun

    $bar = waybar > ~/.config/waybar/waybar.log 2>&1

    $bar-toggle = killall -SIGUSR1 $bar
    $bar-reload = killall $bar; $bar

    $notifications-menu = swaync-client
    $notifications-menu-toggle = $notifications-menu -t
    $notifications-menu-reload = $notifications-menu -R && $notifications-menu -rs

    $browser = firefox
    $notetaking-app = obsidian
    $terminal = kitty
    $office-suite = libreoffice
    $editor = code
    $file-manager = nemo
    $alter-file-manager = nemo
    $music = spotify-launcher


# === ENV === #

    # XDG
    envd = XDG_CURRENT_DESKTOP, Hyprland
    envd = XDG_SESSION_TYPE, wayland
    envd = XDG_SESSION_DESKTOP, Hyprland

    # QT
    env = QT_QPA_PLATFORM, wayland
    env = QT_QPA_PLATFORMTHEME, qt5ct
    env = QT_WAYLAND_DISABLE_WINDOWDECORATION, 1
    env = QT_AUTO_SCREEN_SCALE_FACTOR, 1
    #env = QT_STYLE_OVERRIDE, kvantum

    # Tearing
    env = WLR_DRM_NO_ATOMIC, 0

    # Themes
    env = GTK_THEME, catppuccin-macchiato-lavender-standard+default
    env = XCURSOR_THEME, catppuccin-macchiato-dark-cursors
    env = XCURSOR_SIZE, 24
    env = HYPRCURSOR_THEME, catppuccin-macchiato-dark-cursors
    env = HYPRCURSOR_SIZE, 24


# === MONITORS === #

    # Main Monitor
    monitor=DP-2,2560x1440@144Hz,1920x0,1

    # Second Monitor
    monitor=HDMI-A-1,1920x1080@60,0x0,1


# === WORKSPACES === #

    # Left Monitor
    workspace = 1, monitor:HDMI-A-1, default:true
    workspace = 2, monitor:HDMI-A-1
    workspace = 3, monitor:HDMI-A-1
    workspace = 4, monitor:HDMI-A-1
    workspace = 5, monitor:HDMI-A-1
    workspace = 6, monitor:HDMI-A-1
    workspace = 7, monitor:HDMI-A-1
    workspace = 8, monitor:HDMI-A-1
    workspace = 9, monitor:HDMI-A-1

    # Right Monitor
    workspace = 10, monitor:DP-2, default:true
    workspace = 11, monitor:DP-2
    workspace = 12, monitor:DP-2
    workspace = 13, monitor:DP-2, rounding:false, decorate:false, gapsin:0, gapsout:0, border:false, decorate:false # Figma Workspace
    workspace = 14, monitor:DP-2, rounding:false, decorate:false, gapsin:0, gapsout:0, border:false, decorate:false # Gaming Workspace
    workspace = 15, monitor:DP-2
    workspace = 16, monitor:DP-2
    workspace = 17, monitor:DP-2
    workspace = 18, monitor:DP-2

    # Third Monitor
    #workspace = 19, monitor:DP-3
    #workspace = 20, monitor:DP-3
    #workspace = 21, monitor:DP-3
    #workspace = 22, monitor:DP-3
    #workspace = 23, monitor:DP-3
    #workspace = 24, monitor:DP-3
    #workspace = 25, monitor:DP-3
    #workspace = 26, monitor:DP-3
    #workspace = 27, monitor:DP-3


# === INPUT === #

    input {
        kb_layout = us,cz
        kb_options = compose:rctrl, level3:ralt_switch, grp:alt_space_toggle

        numlock_by_default = true
    }


# === MISC === #

    general {
        allow_tearing = true
    }

    misc {
        always_follow_on_dnd = true
        disable_hyprland_logo = true
        vrr = 0
        animate_manual_resizes = true
        animate_mouse_windowdragging = true
        enable_swallow = true
        font_family = CommitMono Nerd Font
        middle_click_paste = false
    }

    xwayland {
        force_zero_scaling = true
    }

    dwindle {
        pseudotile = yes # Master switch for pseudotiling. Enabling is bound to mainMod + P
        preserve_split = yes # You probably want this
        pseudotile = true # Enable pseudotiling on dwindle
        force_split = 0
        preserve_split = true
    }

    gestures {
    }


# === PLUGINS === #

    # Hyprexpo
    # exec-once = hyprpm enable hyprexpo
    # source = ~/.config/hypr/plugins/hyprexpo.conf

    exec-once = hyprpm reload -n


# === BINDS === #

    # Variables
    $mainMod = SUPER
    $period = 60
    $scripts = ~/.config/hypr/scripts
    $launcher-scripts = ~/.config/rofi/scripts
    $emoji = ~/.config/rofi/scripts/emoji/emoji
    env = launcher, rofi -show drun

    # Applications
    bind = $mainMod, W, exec, $scripts/launch_app $browser
    bind = $mainMod, O, exec, $scripts/launch_app $notetaking-app
    bind = $mainMod, S, exec, $scripts/launch_app $music
    bind = $mainMod SHIFT, O, exec, $scripts/launch_app $office-suite
    bind = $mainMod, E, exec, $scripts/launch_app $file-manager
    bind = $mainMod SHIFT, E, exec, $scripts/launch_app $alter-file-manager
    bind = $mainMod, RETURN, exec, $scripts/launch_app $terminal
    bind = $mainMod, BACKSPACE, exec, $scripts/launch_app $editor
    # bind = $mainMod SHIFT, BACKSPACE, exec, $scripts/launch_app $alter-editor

    bind = $mainMod SHIFT +, XF86MonBrightnessUp, exec, brightnessctl s +5%
    bind = $mainMod SHIFT -, XF86MonBrightnessDown, exec, brightnessctl s 5%-

    # Notifications Menu
    # bind = $mainMod, N, exec, $notifications-menu-toggle
    bind = $mainMod SHIFT, R, exec, $notifications-menu-reload

    # Bar
    bind = $mainMod CTRL, R, exec, $bar-reload
    bind = $mainMod CTRL, T, exec, $bar-toggle

    # Pickers/Launchers
    bind = $mainMod, SPACE, exec, $launcher
    bind = $mainMod, INSERT, exec, $scripts/color_picker
    bind = $mainMod SHIFT, W, exec, $launcher-scripts/wallpaper/wallpaper
    bind = $mainMod, 61, exec, $launcher-scripts/keybindings/keybindings # /
    bind = $mainMod, ESCAPE, exec, $launcher-scripts/powermenu/powermenu
    bind = $mainMod, V, exec, $launcher-scripts/clipboard/clipboard
    bind = $mainMod, $period, exec, $emoji

    # = Screenshots
        bind = $mainMod, PRINT, exec, $launcher-scripts/screenshot/screenshot
        bind = SHIFT, ESCAPE, exec, $launcher-scripts/screenshot/screenshot --freeze

    # = Other Modules
        #bind = $mainMod, Z, exec, pypr zoom
        bind = $mainMod CTRL, W, exec, $scripts/random_wallpaper

    # Windows
    # = Basic Operations
        bind = $mainMod, Q, exec, \
            hyprctl activewindow | grep -q "class: scratchpad-large" \
            && hyprctl dispatch togglespecialworkspace scratchpad-large \
            || hyprctl dispatch killactive
        bind = $mainMod, A, exec, $scripts/toggle_floating
        bind = $mainMod, P, pseudo
        bind = $mainMod, F, fullscreen, 0

    # = Mouse
        bindm = $mainMod, mouse:272, movewindow
        bindm = $mainMod, mouse:273, resizewindow

    # = Focusing
        bind = $mainMod, LEFT, movefocus, l
        bind = $mainMod, RIGHT, movefocus, r
        bind = $mainMod, UP, movefocus, u
        bind = $mainMod, DOWN, movefocus, d
        # = Vim-keybinds
            bind = $mainMod, H, movefocus, l
            bind = $mainMod, L, movefocus, r
            bind = $mainMod, K, movefocus, u
            bind = $mainMod, J, movefocus, d

    # = Moving
        bind = $mainMod SHIFT, LEFT, movewindow, l
        bind = $mainMod SHIFT, RIGHT, movewindow, r
        bind = $mainMod SHIFT, UP, movewindow, u
        bind = $mainMod SHIFT, DOWN, movewindow, d
        #rbind = $mainMod SHIFT, 51, exec, $scripts/move_by_rules # Backslash
        # = Vim-keybinds
            bind = $mainMod SHIFT, H, movewindow, l
            bind = $mainMod SHIFT, L, movewindow, r
            bind = $mainMod SHIFT, K, movewindow, u
            bind = $mainMod SHIFT, J, movewindow, d

    # = Center and Split
        bind = $mainMod SHIFT, S, togglesplit
        bind = $mainMod, C, exec, hyprctl dispatch centerwindow 1

    # = Group Control
        bind = $mainMod, G, togglegroup
        bind = $mainMod CTRL, G, lockactivegroup, toggle
        bind = ALT, TAB, changegroupactive

    # = Resizing Windows
        bind = $mainMod, R, submap, resize
        submap = resize

        binde = , RIGHT, resizeactive, 40 0
        binde = , LEFT, resizeactive, -40 0
        binde = , UP, resizeactive, 0 -40
        binde = , DOWN, resizeactive, 0 40

        binde = , L, resizeactive, 40 0
        binde = , H, resizeactive, -40 0
        binde = , K, resizeactive, 0 -40
        binde = , J, resizeactive, 0 40

        bind = , ESCAPE, submap, reset

        submap = reset

    # Workspaces
    # = Focusing other Workspaces
        bind = $mainMod, 1, workspace, r~1
        bind = $mainMod, 2, workspace, r~2
        bind = $mainMod, 3, workspace, r~3
        bind = $mainMod, 4, workspace, r~4
        bind = $mainMod, 5, workspace, r~5
        bind = $mainMod, 6, workspace, r~6
        bind = $mainMod, 7, workspace, r~7
        bind = $mainMod, 8, workspace, r~8
        bind = $mainMod, 9, workspace, r~9

    # = Moving Windows to other Workspaces
        bind = $mainMod SHIFT, 1, movetoworkspace, r~1
        bind = $mainMod SHIFT, 2, movetoworkspace, r~2
        bind = $mainMod SHIFT, 3, movetoworkspace, r~3
        bind = $mainMod SHIFT, 4, movetoworkspace, r~4
        bind = $mainMod SHIFT, 5, movetoworkspace, r~5
        bind = $mainMod SHIFT, 6, movetoworkspace, r~6
        bind = $mainMod SHIFT, 7, movetoworkspace, r~7
        bind = $mainMod SHIFT, 8, movetoworkspace, r~8
        bind = $mainMod SHIFT, 9, movetoworkspace, r~9

    # = Moving Windows to other Workspaces (Silent)
        bind = $mainMod ALT, 1, movetoworkspacesilent, r~1
        bind = $mainMod ALT, 2, movetoworkspacesilent, r~2
        bind = $mainMod ALT, 3, movetoworkspacesilent, r~3
        bind = $mainMod ALT, 4, movetoworkspacesilent, r~4
        bind = $mainMod ALT, 5, movetoworkspacesilent, r~5
        bind = $mainMod ALT, 6, movetoworkspacesilent, r~6
        bind = $mainMod ALT, 7, movetoworkspacesilent, r~7
        bind = $mainMod ALT, 8, movetoworkspacesilent, r~8
        bind = $mainMod ALT, 9, movetoworkspacesilent, r~9

    # = Moving to other Workspace with Mouse Control
        bind = $mainMod, mouse_down, workspace, m-1
        bind = $mainMod, mouse_up, workspace, m+1

    # = Moving to other Workspace with Keyboard
        bind = $mainMod CTRL, LEFT, workspace, m-1
        bind = $mainMod CTRL, RIGHT, workspace, m+1

        bind = $mainMod CTRL, H, workspace, m-1
        bind = $mainMod CTRL, L, workspace, m+1

    # Monitors
    # = Moving to Next and Prev Monitors
        bind = $mainMod, 59, focusmonitor, -1 # Comma

    # Media
    # = Audio
        bind = $mainMod CTRL, V, exec, ~/.local/bin/restartAudio

        bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
        bindl = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%+
        bindl = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
        bindl = , XF86AudioPlay, exec, playerctl play-pause
        bindl = , XF86AudioPause, exec, playerctl play-pause
        bindl = , XF86AudioNext, exec, playerctl next
        bindl = , XF86AudioPrev, exec, playerctl previous

        bindl = SUPER, XF86AudioRaiseVolume, exec, playerctl next
        bindl = SUPER, XF86AudioLowerVolume, exec, playerctl previous

    # = Brightness
        #bindle = , XF86MonBrightnessUp, exec, swayosd-client --brightness +10
        #bindle = , XF86MonBrightnessDown, exec, swayosd-client --brightness -10

    # Other
    # = Disable anim, blur, etc
        #bind = $mainMod, F12, exec, $scripts/performance

    # = Freeze active window
        bind = $mainMod SHIFT, ESCAPE, exec, $scripts/hyprfreeze -a

    # = Open Wikis
        bind = $mainMod, F1, exec, xdg-open https://wiki.hyprland.org/


# === RULES === #

    # MONITOR 1                   MONITOR 2                       MONITOR 3
    # "1": "1", 󰈹 firefox         "10": "1", 󰈹 firefox            "19": "10",
    # "2": "2", 󰎄 music           "11": "2", 󱃖 code               "20": "20",
    # "3": "3", 󰀆 chat            "12": "3", 󰑕 obsidian           "21": "21",
    # "4": "4",                   "13": "4", 󰇟 figma              "22": "22",
    # "5": "5",                   "14": "5", 󰩳 gaming             "23": "23",
    # "6": "6",                   "15": "6",                      "24": "24",
    # "7": "7",                   "16": "7",                      "25": "25",
    # "8": "8",                   "17": "8",                      "26": "26",
    # "9": "9", 󰒔 settings        "18": "9",                      "27": "27"
    
    # Workspace Rules
    # = System
        windowrulev2 = workspace 8, class:^(.*virt-manager.*)$|(.*PikaBackup.*)$|(.*VirtualBox Manager.*)$
        windowrulev2 = workspace 17, class:^(.*GParted.*)$|(.*clamtk.*)$|(.*gnome.Logs.*)$

    # = Gaming
        windowrulev2 = workspace 16 silent, class:^([Ss]team)$|(.*heroic.*)$
        windowrulev2 = workspace 7, class:^(.*Ryujinx.*)$|(.*cemu.*)$|(.*dolphin.*)$|(.*RetroArch.*)$|(.*xemu.*)$|(.*duckstation.*)$|(.*rpcs3.*)$

    # = Media
        windowrulev2 = workspace 21 silent, class:^(.*thunderbird.*)$
        windowrulev2 = workspace 2, class:^(.*[Ss]potify.*)$|(.*tidal-hifi.*)$|(.*You[Tt]ube Music.*)$
        windowrulev2 = workspace 3, class:^(.*discord.*)$|(.*vesktop.*)$|(.*WebCord.*)$|(.*[Tt]elegram.*)$
        windowrulev2 = workspace 15, class:^(.*obsproject.*)$
        windowrulev2 = workspace 14, class:^(.*easyeffects.*)$|^(.*qpwgraph.*)$|(.*Helvum.*)$
        windowrulev2 = workspace 5, class:^(.*vital.*)$|(.*fl64.*)$|(.*nicotine_plus.*)$
        windowrulev2 = workspace 5, title:^(.*FL Studio.*)$
        windowrulev2 = workspace 4, class:^(.*pinta.*)$|(.*krita.*)$|(.*blender.*)$|(.*Upscayl.*)$

    # = Productivity/Dev
        windowrulev2 = workspace 12, class:^(.*obsidian.*)$|(.*Zotero.*)$
        windowrulev2 = workspace 11, class:^(.*Code.*)$|(.*codium.*)$|(.*VSCodium.*)$|(.*neovide.*)$

    # Idle behavior
    windowrulev2 = idleinhibit always, class:^(.*steam_app.*)$
    windowrulev2 = idleinhibit fullscreen, class:^(.*celluloid.*)$|^(.*mpv.*)$
    windowrulev2 = idleinhibit fullscreen, class:^(.*LibreWolf.*)$|^(.*floorp.*)$|^(.*Brave.*)$|^(.*firefox.*)$|^(.*chromium.*)$|^(.*zen-alpha.*)$

    # Scratchpads & Floats
        # All scratchpad-* apps (btop, nvtop, etc.)
        windowrulev2 = workspace special:scratchpad-large silent, class:^(scratchpad-.*)$
        windowrulev2 = float, class:^(scratchpad-.*)$
        windowrulev2 = size 70% 70%, class:^(scratchpad-.*)$
        windowrulev2 = center 1, class:^(scratchpad-.*)$

        # Pavucontrol
        windowrulev2 = workspace special:org.pulseaudio.pavucontrol silent, class:^(org\.pulseaudio\.pavucontrol)$
        windowrulev2 = float, class:^(org\.pulseaudio\.pavucontrol)$
        windowrulev2 = size 40% 60%, class:^(org\.pulseaudio\.pavucontrol)$
        windowrulev2 = center 1, class:^(org\.pulseaudio\.pavucontrol)$

        # Network manager
        windowrulev2 = workspace special:nm-connection-editor silent, class:^(nm-connection-editor)$
        windowrulev2 = float, class:^(nm-connection-editor)$
        windowrulev2 = center 1, class:^(nm-connection-editor)$
        windowrulev2 = size 50% 50%, class:^(nm-connection-editor)$

    # Floats
        $center-float-large = class:^(center-float-large)$
        windowrulev2 = float, $center-float-large
        windowrulev2 = size 70% 70%, $center-float-large
        windowrulev2 = center 1, $center-float-large

        $center-float = class:^(center-float)$
        $center-float-title = title:^(.*Open Folder.*)$|^(.*Open File.*)$|^(.*Save File.*)$|^(.*Save Folder.*)$|^(.*Save Image.*)$|^(.*Save As.*)$|^(.*Open As.*)$
        windowrulev2 = float, $center-float
        windowrulev2 = float, $center-float-title
        windowrulev2 = size 50% 50%, $center-float
        windowrulev2 = size 50% 50%, $center-float-title
        windowrulev2 = center 1, $center-float
        windowrulev2 = center 1, $center-float-title

        $center-float-mini = class:^(center-float-mini)$|^(.*galculator.*)$|^(.*ytdlp-gui.*)$|^(.*udiskie.*)$|^(.*Calculator.*)$
        windowrulev2 = float, $center-float-mini
        windowrulev2 = size 30% 40%, $center-float-mini
        windowrulev2 = center 1, $center-float-mini

    # Other floats
        windowrulev2 = float, class:^(xfce-polkit|wleave|nwg-look|nm-connection-editor|org.twosheds.iwgtk|overskride|branchdialog)$

    # Animations
        windowrulev2 = animation slide, title:^(.*cava.*)$
        windowrulev2 = animation popin, class:^(.*wleave.*)$

    # Layer rules
        layerrule = animation popin, rofi
        layerrule = blur, rofi
        layerrule = ignorezero, rofi
        layerrule = blur, waybar
        layerrule = ignorezero, waybar
        layerrule = ignorezero, swaync-notification-window
        layerrule = animation slide, swaync-notification-window
        layerrule = animation slide, swaync-control-center
        layerrule = animation fade, swayosd
        layerrule = animation fade, selection
        layerrule = animation fade, hyprlock
        layerrule = noanim, hyprpicker

    # App-specific
        $videobridge = class:^(.*xwaylandvideobridge.*)$
        windowrulev2 = opacity 0.0 override 0.0 override, $videobridge
        windowrulev2 = noanim, $videobridge
        windowrulev2 = noblur, $videobridge
        windowrulev2 = noinitialfocus, $videobridge
        windowrulev2 = maxsize 1 1, $videobridge

        $scrcpy = class:^(.*scrcpy.*)$
        windowrulev2 = center 1, $scrcpy
        windowrulev2 = float, $scrcpy

        windowrulev2 = immediate, class:^(.*steam_app.*)$

# === THEME ==# #
    source = ~/.config/hypr/theme/theme.conf
    source = ~/.config/hypr/theme/vars.conf


#== AUTOSTART === #
    exec-once = dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XDG_SESSION_TYPE
